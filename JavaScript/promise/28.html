<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>使用map实现Promise队列</title>
</head>

<body></body>
<script src="js/ajax.js"></script>
<script>
  // function queue1(num) {
  //     let promise = Promise.resolve();
  //     num.map(v => {
  //       promise = promise.then(_ => {
  //         return new Promise(resolve => {
  //           setTimeout(() => {
  //             console.log(v);
  //             resolve();
  //           }, 1000)
  //         })
  //       })
  //     })
  //   }
  //   queue1([1, 2, 3, 4])

  function queue(num) {
    let promise = Promise.resolve();
    num.map(v => {
      promise = promise.then(_ => {
        return v();
      });
    });
  }

  function p1() {
    return new Promise(resolve => {
      setTimeout(() => {
        console.log("p1");
        resolve();
      }, 1000);
    });
  }

  function p2() {
    return new Promise(resolve => {
      setTimeout(() => {
        console.log("p2");
        resolve();
      }, 1000);
    });
  }
  queue([p1, p2]);

</script>

</html>
